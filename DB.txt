drop database test_db;

create database test_db;

use test_db;

create table ingredient (
	ingredient_id varchar(100) not null primary key,
	ingredient_name varchar(50) not null,
	ingredient_image varchar(50) null
	);

create table cocktail (
	cocktail_id varchar(100) not null primary key,
	cocktail_name varchar(50) not null,
	cocktail_image varchar(50) null,
	cocktail_writer varchar(1000) null,
	cocktail_comment varchar(1000) null,
	cocktail_glass varchar(1000) null,
	cocktail_base varchar(50) null
	);
	
create table settingCocktailWithIngredient(
	num int auto_increment not null primary key,
	cocktail_set_id varchar(100) not null,
	ingredient_set_id varchar(50) not null,
	vol varchar(30) not null,
	index set_igd_index(cocktail_set_id),
	foreign key(cocktail_set_id) references cocktail(cocktail_id) on delete cascade,
	foreign key(ingredient_set_id) references ingredient(ingredient_id) on delete cascade	
);

create table user(
	user_id varchar(100) not null primary key,
	user_email varchar(100) not null,
	user_password varchar(100) not null,
	user_password varchar(100) not null
);

create table downloadUserWithCocktail(
	num int auto_increment not null primary key,
	cocktail_download_id varchar(100) not null,
	user_download_id varchar(100) not null,
	index set_igd_index(user_download_id),
	foreign key(cocktail_download_id) references cocktail(cocktail_id) on delete cascade,
	foreign key(user_download_id) references user(user_id) on delete cascade
);

insert into ingredient values ('1_id','1_name','1_image');
insert into ingredient values ('2_id','2_name','2_image');
insert into ingredient values ('3_id','3_name','3_image');

insert into cocktail values ('a_id', 'a_name', 'a_image', 'a_comment', 'a_base');

insert into settingingredient values (null, 'a_id', '1_id', '1oz');
insert into settingingredient values (null, 'a_id', '2_id', '2oz');
insert into settingingredient values (null, 'a_id', '4_id', '2oz'); // error

select * from ingredient;
select * from cocktail;
select * from settingCocktailWithIngredient;

select * from settingCocktailWithIngredient where settingCocktailWithIngredient.cocktail_set_id = 'a_id';

DELETE from ingredient WHERE ingredient_id="1_id";

DELETE FROM COCKTAIL WHERE COCKTAIL_ID="a_id";